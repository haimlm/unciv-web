step_id,goal,primary_files,status,notes,validation_command
1,Introduce in-repo WAR preload payloads+metadata,"/Users/haimlamper/Unciv-war-e2e/web/src/main/resources/webtest/preloads/*",done,"Deterministic preload payload+metadata fixtures generated and committed for from-start/preworld/deep roles.","./gradlew :web:webGenerateWarPreloads --no-daemon"
2,Add deterministic preload generator+verifier,"/Users/haimlamper/Unciv-war-e2e/web/src/main/kotlin/com/unciv/app/web/WebWarPreloadTool.kt;/Users/haimlamper/Unciv-war-e2e/web/build.gradle.kts",done,"Generator/verifier wired with role-aware invariants (including war-preworld peace-target city-count guard).","./gradlew :web:webVerifyWarPreloads --no-daemon"
3,Inject preload payload/meta into browser runtime,"/Users/haimlamper/Unciv-war-e2e/scripts/web/lib/ui-war-runner.js",done,"Role-based preload files now required; metadata JSON parse + static /index.html 200 preflight added.","node /Users/haimlamper/Unciv-war-e2e/scripts/web/run-web-ui-war-from-start.js"
4,Expose preload globals through interop,"/Users/haimlamper/Unciv-war-e2e/web/src/main/java/com/unciv/app/web/WebUiProbeInterop.java",done,"Added getWarPreloadPayload() and getWarPreloadMetaJson().","./gradlew :web:compileKotlin --no-daemon"
5,Replace runtime setup with preload loading,"/Users/haimlamper/Unciv-war-e2e/web/src/main/kotlin/com/unciv/app/web/WebWarDiplomacyProbeRunner.kt",done,"WAR probes now load deterministic preloads only (no runtime world-generation fallback) with metadata validation before flow execution.","HEADLESS=false node /Users/haimlamper/Unciv-war-e2e/scripts/web/run-web-ui-war-preworld.js"
6,Enforce real UI-only war/peace semantics,"/Users/haimlamper/Unciv-war-e2e/web/src/main/kotlin/com/unciv/app/web/WebWarDiplomacyProbeRunner.kt",done,"Declare-war/peace entry remains UI-driven; deterministic turn/overlay handling added so flows complete without hidden startup/world fallbacks.","HEADLESS=false node /Users/haimlamper/Unciv-war-e2e/scripts/web/run-web-ui-war-from-start.js"
7,Tighten WAR pass criteria,"/Users/haimlamper/Unciv-war-e2e/web/src/main/kotlin/com/unciv/app/web/WebWarDiplomacyProbeRunner.kt;/Users/haimlamper/Unciv-war-e2e/scripts/web/run-web-ui-war-from-start.js;/Users/haimlamper/Unciv-war-e2e/scripts/web/run-web-ui-war-preworld.js",done,"from-start/preworld/deep wrappers now enforce strict semantic assertions and fail process on semantic regressions.","HEADLESS=false /Users/haimlamper/Unciv-war-e2e/scripts/web/run-war-ui-e2e-local.sh"
8,Fix deep wrapper strictness,"/Users/haimlamper/Unciv-war-e2e/scripts/web/run-web-ui-war-deep.js",done,"Deep wrapper now fails unless result.passed=true + diplomacy transitions + >=2 force tokens.","node /Users/haimlamper/Unciv-war-e2e/scripts/web/run-web-ui-war-deep.js"
9,Startup robustness cleanup,"/Users/haimlamper/Unciv-war-e2e/web/src/main/kotlin/com/unciv/app/web/WebGame.kt",done,"uiProbe path now calls enforceWebInputDefaults() after super.create().","./gradlew :web:compileKotlin --no-daemon"
10,Add repeatable local WAR gate runner,"/Users/haimlamper/Unciv-war-e2e/scripts/web/run-war-ui-e2e-local.sh",done,"Picks free port, serves absolute dist, preflights index, runs 3 WAR scripts strict-no-true.","HEADLESS=false /Users/haimlamper/Unciv-war-e2e/scripts/web/run-war-ui-e2e-local.sh"
